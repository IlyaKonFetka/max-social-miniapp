@echo off
REM –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ GitHub Pages
REM –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: deploy.bat "–°–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞"

echo ========================================
echo üöÄ –î–µ–ø–ª–æ–π –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ GitHub
echo ========================================
echo.

REM –ü—Ä–æ–≤–µ—Ä–∫–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ª–∏ Git
if not exist ".git" (
    echo ‚ùå Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!
    echo –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ DEPLOY.md
    pause
    exit /b 1
)

REM –ü–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞
set COMMIT_MESSAGE=%~1
if "%COMMIT_MESSAGE%"=="" (
    set COMMIT_MESSAGE=Update miniapp
)

echo üì¶ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
git add .

echo üíæ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞: "%COMMIT_MESSAGE%"
git commit -m "%COMMIT_MESSAGE%"

if errorlevel 1 (
    echo ‚ÑπÔ∏è –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞
) else (
    echo ‚¨ÜÔ∏è –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ GitHub...
    git push
    
    if errorlevel 1 (
        echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ GitHub
        pause
        exit /b 1
    )
    
    echo.
    echo ‚úÖ –£—Å–ø–µ—à–Ω–æ! –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ GitHub
    echo ‚è±Ô∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ GitHub Pages –∑–∞–π–º—ë—Ç 1-2 –º–∏–Ω—É—Ç—ã
)

echo.
echo ========================================
pause

